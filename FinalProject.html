<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Naomi Buell and Richie Rivera">

<title>Does public transportation decrease social isolation?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="FinalProject_files/libs/clipboard/clipboard.min.js"></script>
<script src="FinalProject_files/libs/quarto-html/quarto.js"></script>
<script src="FinalProject_files/libs/quarto-html/popper.min.js"></script>
<script src="FinalProject_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="FinalProject_files/libs/quarto-html/anchor.min.js"></script>
<link href="FinalProject_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="FinalProject_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="FinalProject_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="FinalProject_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="FinalProject_files/libs/bootstrap/bootstrap-973236bd072d72a04ee9cd82dcc9cb29.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Does public transportation decrease social isolation?</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Naomi Buell and Richie Rivera </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="load-data" class="level2">
<h2 class="anchored" data-anchor-id="load-data">Load data</h2>
<p>Load <a href="https://data.cdc.gov/500-Cities-Places/PLACES-Local-Data-for-Better-Health-Census-Tract-D/cwsq-ngmh/about_data">PLACES: Local Data for Better Health, Census Tract Data 2024 release</a> using <span class="citation" data-cites="CDCPLACES">(<a href="#ref-CDCPLACES" role="doc-biblioref">2025</a>)</span> <span class="citation" data-cites="Greenlund2022">(<a href="#ref-Greenlund2022" role="doc-biblioref">Greenlund et al. 2022</a>)</span>. This is 2022 data.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  stateabbr locationname data_value totalpopulation
1        FL  12086001801       34.9            3924
2        FL  12086007200       31.0            2537
3        FL  12086002202       32.6            4725
4        FL  12086008415       26.3            5047
5        FL  12086004405       29.3            3030
6        FL  12086010213       30.1            4606</code></pre>
</div>
</div>
<p>Get <a href="https://www.icpsr.umich.edu/web/ICPSR/studies/38605/datadocumentation#">Public Transit Stops by Census Tract and ZIP Code Tabulation Area, United States, 2024</a> from the National Neighborhood Data Archive (NaNDA) <span class="citation" data-cites="pan2023">(<a href="#ref-pan2023" role="doc-biblioref">Pan et al. 2023</a>)</span>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  tract_fips20 census_tract_area20 tot_pop_2020 count_ntm_stops stops_per_capita
  &lt;chr&gt;                      &lt;dbl&gt;        &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;
1 01001020100                3.79          1941               0                0
2 01001020200                1.28          1757               0                0
3 01001020300                2.07          3694               0                0
4 01001020400                2.46          3539               0                0
5 01001020501                2.40          4306               0                0
6 01001020502                0.810         3100               0                0
# ℹ 1 more variable: stops_per_sqmile &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Get 2010 USDA-ERS Rural Urban Commuting Area (RUCA) Code classification scheme for Census tracts <span class="citation" data-cites="paykin2022">(<a href="#ref-paykin2022" role="doc-biblioref">Paykin et al. 2022</a>)</span>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  tract_fips20 ruca1 ruca2 rurality
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
1 01001020100      1     1 Urban   
2 01001020200      1     1 Urban   
3 01001020300      1     1 Urban   
4 01001020400      1     1 Urban   
5 01001020500      1     1 Urban   
6 01001020600      1     1 Urban   </code></pre>
</div>
</div>
<p>Get age by census tract from the <a href="https://www2.census.gov/programs-surveys/decennial/2020/data/demographic-and-housing-characteristics-file/age-group-visualization/tract-agegroup-2020.csv">2020 Census</a> <span class="citation" data-cites="census2023">(<a href="#ref-census2023" role="doc-biblioref">U.S. Census Bureau 2023</a>)</span>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  stateabbr tract_fips20 rate_65_plus rate_85_plus
  &lt;chr&gt;     &lt;chr&gt;               &lt;dbl&gt;        &lt;dbl&gt;
1 AL        01001201000        0.160        0.0158
2 AL        01001202000        0.154        0.0102
3 AL        01001203000        0.186        0.0249
4 AL        01001204000        0.226        0.0313
5 AL        01001205010        0.178        0.0134
6 AL        01001205020        0.0888       0.0058</code></pre>
</div>
</div>
<p>Merge data. Since there are two columns for total population, we will use the one that is more complete, <code>totalpopulation</code>, from the CDC PLACES data. We will also rename the columns for clarity and consistency and generate a new variable, <code>density_per_sqmi</code>, which is the total population divided by the area in square miles.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  state_abbr        fips isolation totalpopulation area_sq_miles
1         FL 12086001801      34.9            3924     0.5048869
2         FL 12086007200      31.0            2537     0.3517078
3         FL 12086002202      32.6            4725     0.6207889
4         FL 12086008415      26.3            5047     1.5695713
5         FL 12086004405      29.3            3030     0.1355257
6         FL 12086010213      30.1            4606     0.5791057
  count_ntm_stops stops_per_capita stops_per_sqmile ruca rurality rate_65_plus
1              30         5.664652        59.419250    1    Urban           NA
2              18         6.749156        51.178848    1    Urban           NA
3              22         3.474964        35.438778    1    Urban           NA
4               5         1.023961         3.185583    1    Urban           NA
5               9         2.391709        66.408058    1    Urban           NA
6               4         1.041938         6.907201 &lt;NA&gt;     &lt;NA&gt;           NA
  rate_85_plus density_per_sqmi
1           NA         7772.038
2           NA         7213.375
3           NA         7611.283
4           NA         3215.528
5           NA        22357.380
6           NA         7953.643</code></pre>
</div>
</div>
</section>
<section id="exploratory-data-analysis-and-data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis-and-data-preparation">Exploratory data analysis and data preparation</h2>
<section id="missingness" class="level3">
<h3 class="anchored" data-anchor-id="missingness">Missingness</h3>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">63907</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">state_abbr</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">CA: 9070, TX: 6845, FL: 5080, OH: 3155</td>
</tr>
<tr class="even">
<td style="text-align: left;">fips</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">63887</td>
<td style="text-align: left;">270: 3, 040: 2, 040: 2, 040: 2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ruca</td>
<td style="text-align: right;">19251</td>
<td style="text-align: right;">0.7</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">21</td>
<td style="text-align: left;">1: 31038, 2: 4003, 4: 2507, 10: 1908</td>
</tr>
<tr class="even">
<td style="text-align: left;">rurality</td>
<td style="text-align: right;">19248</td>
<td style="text-align: right;">0.7</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Urb: 31670, Sub: 6760, Rur: 6229</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">isolation</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">33.72</td>
<td style="text-align: right;">3.92</td>
<td style="text-align: right;">19.50</td>
<td style="text-align: right;">31.00</td>
<td style="text-align: right;">33.50</td>
<td style="text-align: right;">36.20</td>
<td style="text-align: right;">52.60</td>
<td style="text-align: left;">▁▆▇▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">totalpopulation</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4006.94</td>
<td style="text-align: right;">1683.46</td>
<td style="text-align: right;">54.00</td>
<td style="text-align: right;">2813.00</td>
<td style="text-align: right;">3820.00</td>
<td style="text-align: right;">4981.00</td>
<td style="text-align: right;">37892.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">area_sq_miles</td>
<td style="text-align: right;">876</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">45.66</td>
<td style="text-align: right;">573.34</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.74</td>
<td style="text-align: right;">1.90</td>
<td style="text-align: right;">11.85</td>
<td style="text-align: right;">85554.74</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: right;">876</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">5.31</td>
<td style="text-align: right;">9.71</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">195.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">stops_per_capita</td>
<td style="text-align: right;">876</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">2.04</td>
<td style="text-align: right;">64.31</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">12461.54</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">stops_per_sqmile</td>
<td style="text-align: right;">876</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">8.76</td>
<td style="text-align: right;">20.90</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">9.38</td>
<td style="text-align: right;">689.33</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rate_65_plus</td>
<td style="text-align: right;">38297</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.18</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">0.17</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: left;">▇▆▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">rate_85_plus</td>
<td style="text-align: right;">38297</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">density_per_sqmi</td>
<td style="text-align: right;">876</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4003.35</td>
<td style="text-align: right;">6780.55</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">325.50</td>
<td style="text-align: right;">2134.24</td>
<td style="text-align: right;">4978.35</td>
<td style="text-align: right;">224278.50</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>After filtering raw data for non-missing observations of our dependent variable, feelings of social isolation (<code>isolation</code>), we have 63907 observations. County FIPs and state columns are 100% complete. A small number of counties in the data have missing transit data (1.3707419 % missing) and some counties are not categorized into urban/suburban/rural categories (30.1234607 % missing). The age data has significant missingness (59.9261427 % missing).</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">group_by(select(data, sta…</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">63907</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">state_abbr</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: left;">state_abbr</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">AK</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.33</td>
<td style="text-align: right;">12.27</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.25</td>
<td style="text-align: right;">77</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">AL</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.22</td>
<td style="text-align: right;">8.79</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">112</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">AZ</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.86</td>
<td style="text-align: right;">8.56</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">9.00</td>
<td style="text-align: right;">79</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">CA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.74</td>
<td style="text-align: right;">8.50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: right;">126</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">CT</td>
<td style="text-align: right;">876</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">DC</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20.41</td>
<td style="text-align: right;">21.25</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">23.75</td>
<td style="text-align: right;">162</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">DE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.24</td>
<td style="text-align: right;">9.69</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">13.00</td>
<td style="text-align: right;">47</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">FL</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.35</td>
<td style="text-align: right;">9.79</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">108</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">GA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">9.82</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">77</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">IA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.96</td>
<td style="text-align: right;">15.10</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9.00</td>
<td style="text-align: right;">170</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">ID</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.78</td>
<td style="text-align: right;">5.73</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">41</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">IN</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.61</td>
<td style="text-align: right;">6.87</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">KS</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.46</td>
<td style="text-align: right;">6.59</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">71</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">KY</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.34</td>
<td style="text-align: right;">4.89</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">42</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">MA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8.12</td>
<td style="text-align: right;">9.61</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">12.00</td>
<td style="text-align: right;">66</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">MD</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: right;">16.09</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">16.00</td>
<td style="text-align: right;">195</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">ME</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.42</td>
<td style="text-align: right;">7.61</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">54</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">MI</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.03</td>
<td style="text-align: right;">9.04</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">84</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">MN</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.57</td>
<td style="text-align: right;">13.11</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">12.00</td>
<td style="text-align: right;">103</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">MO</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.15</td>
<td style="text-align: right;">8.11</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">62</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">MS</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">▁▁▇▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">MT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.42</td>
<td style="text-align: right;">5.79</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">NC</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">7.12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">90</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">NE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.91</td>
<td style="text-align: right;">9.44</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">65</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">NH</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.01</td>
<td style="text-align: right;">7.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">68</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">NJ</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.66</td>
<td style="text-align: right;">7.94</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: right;">64</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">NM</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.33</td>
<td style="text-align: right;">9.21</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">56</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">NV</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.32</td>
<td style="text-align: right;">10.15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">104</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">OH</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.35</td>
<td style="text-align: right;">9.52</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">114</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">OK</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.54</td>
<td style="text-align: right;">5.77</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">77</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">RI</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">14.52</td>
<td style="text-align: right;">11.22</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">20.00</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">▇▇▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">SC</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.23</td>
<td style="text-align: right;">7.28</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">89</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">TN</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.04</td>
<td style="text-align: right;">11.83</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">131</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">TX</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.97</td>
<td style="text-align: right;">7.94</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">128</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">UT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8.12</td>
<td style="text-align: right;">10.03</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">13.00</td>
<td style="text-align: right;">102</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">VT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13.18</td>
<td style="text-align: right;">18.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">19.00</td>
<td style="text-align: right;">163</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">WA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.98</td>
<td style="text-align: right;">12.32</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">16.00</td>
<td style="text-align: right;">111</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">WI</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.36</td>
<td style="text-align: right;">11.08</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.00</td>
<td style="text-align: right;">97</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">WV</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: left;">WY</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">▁▁▇▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Note that all counties in Connecticut (CT) have missing transit data, which is why we will remove it from our analysis. The state abbreviation “CT” has 876 rows with missing transit data. The following states are completely missing for the dataset (no CDC PLACES isolation data available): AR, CO, HI, IL, LA, NY, ND, OR, PA, SD, VA.</p>
<p>Revising data by filteringing out missing information (dropped observations are documented in our paper).</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">df_nonmiss</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">63031</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">state_abbr</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">39</td>
<td style="text-align: left;">CA: 9070, TX: 6845, FL: 5080, OH: 3155</td>
</tr>
<tr class="even">
<td style="text-align: left;">fips</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">63011</td>
<td style="text-align: left;">270: 3, 040: 2, 040: 2, 040: 2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ruca</td>
<td style="text-align: right;">18375</td>
<td style="text-align: right;">0.71</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">21</td>
<td style="text-align: left;">1: 31038, 2: 4003, 4: 2507, 10: 1908</td>
</tr>
<tr class="even">
<td style="text-align: left;">rurality</td>
<td style="text-align: right;">18372</td>
<td style="text-align: right;">0.71</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Urb: 31670, Sub: 6760, Rur: 6229</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">isolation</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">33.73</td>
<td style="text-align: right;">3.92</td>
<td style="text-align: right;">19.50</td>
<td style="text-align: right;">31.00</td>
<td style="text-align: right;">33.50</td>
<td style="text-align: right;">36.20</td>
<td style="text-align: right;">52.60</td>
<td style="text-align: left;">▁▆▇▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">totalpopulation</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4005.42</td>
<td style="text-align: right;">1686.50</td>
<td style="text-align: right;">54.00</td>
<td style="text-align: right;">2810.00</td>
<td style="text-align: right;">3817.00</td>
<td style="text-align: right;">4979.00</td>
<td style="text-align: right;">37892.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">area_sq_miles</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">45.66</td>
<td style="text-align: right;">573.34</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.74</td>
<td style="text-align: right;">1.90</td>
<td style="text-align: right;">11.85</td>
<td style="text-align: right;">85554.74</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">5.31</td>
<td style="text-align: right;">9.71</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">195.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">stops_per_capita</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.04</td>
<td style="text-align: right;">64.31</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">12461.54</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">stops_per_sqmile</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">8.76</td>
<td style="text-align: right;">20.90</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">9.38</td>
<td style="text-align: right;">689.33</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rate_65_plus</td>
<td style="text-align: right;">37421</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0.18</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">0.17</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: left;">▇▆▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">rate_85_plus</td>
<td style="text-align: right;">37421</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">density_per_sqmi</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4003.35</td>
<td style="text-align: right;">6780.55</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">325.50</td>
<td style="text-align: right;">2134.24</td>
<td style="text-align: right;">4978.35</td>
<td style="text-align: right;">224278.50</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now there are 63031 observations remaining after removing Connecticut, and there are no missing isolation or transit data. We note a few census tracts with very low populations (e.g., 1 person in central park or 17 people in the national mall) that may not be representative of the general population.</p>
</section>
<section id="distribution" class="level3">
<h3 class="anchored" data-anchor-id="distribution">Distribution</h3>
<p>Viewing the distribution of our modeling variables.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FinalProject_files/figure-html/histograms-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">select(df_nonmiss, stops_…</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">63031</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">stops_per_capita</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.04</td>
<td style="text-align: right;">64.31</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">12461.54</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">density_per_sqmi</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4003.35</td>
<td style="text-align: right;">6780.55</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">325.5</td>
<td style="text-align: right;">2134.24</td>
<td style="text-align: right;">4978.35</td>
<td style="text-align: right;">224278.50</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_ntm_stops</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.31</td>
<td style="text-align: right;">9.71</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">195.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The column <code>stops_per_capita</code> has high outliers (e.g., 12k stops per capita observation when mean value is 2). We plot the data with outliers (defined as <code>Q3 + 1.5 * IQR</code>) removed.**</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FinalProject_files/figure-html/remove-outliers-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We also investigate distributions of the centered and scaled data.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FinalProject_files/figure-html/histograms-scaled-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="correlation" class="level3">
<h3 class="anchored" data-anchor-id="correlation">Correlation</h3>
<p>The figure below shows that feelings of social isolation among adults is most correlated with population density, number of stops, stops per square mile, and rurality. Positive correlation indicates that the denser an area is, the higher the rate of feeling social isolation, which is counterintuitive to our hypothesis. Social isolation is also positively associated with the count of transit stops (total count in census tract and adjusted per square mile)–also counterintuitive. Social isolation is slightly negatively correlated with rurality as measured by RUCA code, where a higher prevalence of this feeling tends to be associated with a more urban, less rural area, which is also inconsistent with our expectation.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FinalProject_files/figure-html/corrplot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are no columns with pair-wise correlations above the threshold .75, so we don’t need to filter out any highly correlated predictor variables.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>integer(0)</code></pre>
</div>
</div>
</section>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>First, we will fit a linear model to the data for simplicity.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = isolation ~ ., data = df_predictors)

Residuals:
     Min       1Q   Median       3Q      Max 
-11.0938  -1.8674  -0.0829   1.7961  14.0631 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       3.894e+01  9.811e-02 396.936  &lt; 2e-16 ***
totalpopulation  -1.975e-04  1.346e-05 -14.671  &lt; 2e-16 ***
area_sq_miles     1.812e-04  7.611e-05   2.381 0.017261 *  
count_ntm_stops   4.320e-02  3.081e-03  14.020  &lt; 2e-16 ***
stops_per_capita -1.376e-03  1.182e-03  -1.164 0.244303    
stops_per_sqmile  5.936e-03  1.752e-03   3.387 0.000708 ***
ruralitySuburban  6.519e-01  6.292e-02  10.362  &lt; 2e-16 ***
ruralityRural     7.232e-01  6.139e-02  11.782  &lt; 2e-16 ***
rate_65_plus     -3.221e+01  4.692e-01 -68.661  &lt; 2e-16 ***
rate_85_plus      2.233e+01  2.039e+00  10.953  &lt; 2e-16 ***
density_per_sqmi  1.199e-04  4.655e-06  25.751  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.761 on 18999 degrees of freedom
  (44021 observations deleted due to missingness)
Multiple R-squared:  0.4435,    Adjusted R-squared:  0.4432 
F-statistic:  1514 on 10 and 18999 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<ul>
<li><p><code>totalpopulation</code>: For each additional person in a census tract, the probability who report feeling socially isolated decreases by 0.02%.</p></li>
<li><p><code>area_sq_miles</code>: For each additional square mile in a census tract, the probability who report feeling socially isolated increases by 0.02%.</p></li>
<li><p><code>count_ntm_stops</code>: For each additional transit stop in a census tract, the probability who report feeling socially isolated increases by 4.32%.</p></li>
<li><p><code>stops_per_sqmile</code>: For each additional stop per square mile, the probability who report feeling socially isolated in a census tract increases by 0.59%.</p></li>
<li><p><code>ruralitySuburban</code>: If the census tract is considered suburban, the probability who report feeling socially isolated increases by 65.19% compared to an urban tract.</p></li>
<li><p><code>ruralityRural</code>: If the census tract is considered rural, the probability who report feeling socially isolated increases by 72.32% compared to an urban tract.</p></li>
<li><p><code>rate_65_plus</code>: For each additional percentage point of the population aged 65 and older, the probability who report feeling socially isolated in a tract decreases by 3221.33%.</p></li>
<li><p><code>rate_85_plus</code>: For each additional percentage point of the population aged 85 and older, the probability who report feeling socially isolated in a tract increases by 2233.38%.</p></li>
<li><p><code>density_per_sqmi</code>: For each additional person per square mile, the probability who report feeling socially isolated in a tract increases by 0.01%.</p></li>
<li><p><code>stops_per_capita</code> was insignificant, indicating that the number of transit stops per capita does not significantly affect feelings of social isolation in this model.</p></li>
</ul>
<p>The model’s R-squared value indicates that approximately 44.35% of the variance in feelings of social isolation can be explained by the model.</p>
<p>Next, we try bucketing the data by RUCA code. We will use <code>rurality</code> that is a factor with three levels: urban, suburban, and rural.</p>
</section>
<section id="data-dictionary" class="level2">
<h2 class="anchored" data-anchor-id="data-dictionary">Data Dictionary</h2>
<dl>
<dt><code>isolation</code></dt>
<dd>
<p>Probability among adults who report always/usually/sometimes feeling socially isolated. Source: CDC PLACES.</p>
</dd>
<dt><code>totalpopulation</code></dt>
<dd>
<p>Total population of Census 2020. Source: CDC PLACES.</p>
</dd>
<dt><code>count_ntm_stops</code></dt>
<dd>
<p>Count of transit stops reported to National Transit Map as of 1/2023. Source: NaNDA.</p>
</dd>
<dt><code>stops_per_capita</code></dt>
<dd>
<p>Transit stops per 1000 people. Source: NaNDA.</p>
</dd>
<dt><code>stops_per_sqmile</code></dt>
<dd>
<p>Transit stops per square mile. Source: NaNDA.</p>
</dd>
<dt><code>area_sq_miles</code></dt>
<dd>
<p>Census land area, square miles. Source: NaNDA.</p>
</dd>
<dt><code>ruca</code></dt>
<dd>
<p>Secondary RUCA codes, 2010. Source: 2010 USDA-ERS.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Code</strong></th>
<th><strong>Classification description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1 Metropolitan area core: primary flow within an urbanized area (UA)</td>
<td></td>
</tr>
<tr class="even">
<td>1.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>1.1</td>
<td>Secondary flow 30% to 50% to a larger UA</td>
</tr>
<tr class="even">
<td>2 Metropolitan area high commuting: primary flow 30% or more to a UA</td>
<td></td>
</tr>
<tr class="odd">
<td>2.0</td>
<td>No additional code</td>
</tr>
<tr class="even">
<td>2.1</td>
<td>Secondary flow 30% to 50% to a larger UA</td>
</tr>
<tr class="odd">
<td>3 Metropolitan area low commuting: primary flow 10% to 30% to a UA</td>
<td></td>
</tr>
<tr class="even">
<td>3.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>4 Micropolitan area core: primary flow within an urban cluster of 10,000 to 49,999 (large UC)</td>
<td></td>
</tr>
<tr class="even">
<td>4.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>4.1</td>
<td>Secondary flow 30% to 50% to a UA</td>
</tr>
<tr class="even">
<td>5 Micropolitan high commuting: primary flow 30% or more to a large UC</td>
<td></td>
</tr>
<tr class="odd">
<td>5.0</td>
<td>No additional code</td>
</tr>
<tr class="even">
<td>5.1</td>
<td>Secondary flow 30% to 50% to a UA</td>
</tr>
<tr class="odd">
<td>6 Micropolitan low commuting: primary flow 10% to 30% to a large UC</td>
<td></td>
</tr>
<tr class="even">
<td>6.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>7 Small town core: primary flow within an urban cluster of 2,500 to 9,999 (small UC)</td>
<td></td>
</tr>
<tr class="even">
<td>7.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>7.1</td>
<td>Secondary flow 30% to 50% to a UA</td>
</tr>
<tr class="even">
<td>7.2</td>
<td>Secondary flow 30% to 50% to a large UC</td>
</tr>
<tr class="odd">
<td>8 Small town high commuting: primary flow 30% or more to a small UC</td>
<td></td>
</tr>
<tr class="even">
<td>8.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>8.1</td>
<td>Secondary flow 30% to 50% to a UA</td>
</tr>
<tr class="even">
<td>8.2</td>
<td>Secondary flow 30% to 50% to a large UC</td>
</tr>
<tr class="odd">
<td>9 Small town low commuting: primary flow 10% to 30% to a small UC</td>
<td></td>
</tr>
<tr class="even">
<td>9.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>10 Rural areas: primary flow to a tract outside a UA or UC</td>
<td></td>
</tr>
<tr class="even">
<td>10.0</td>
<td>No additional code</td>
</tr>
<tr class="odd">
<td>10.1</td>
<td>Secondary flow 30% to 50% to a UA</td>
</tr>
<tr class="even">
<td>10.2</td>
<td>Secondary flow 30% to 50% to a large UC</td>
</tr>
<tr class="odd">
<td>10.3</td>
<td>Secondary flow 30% to 50% to a small UC</td>
</tr>
<tr class="even">
<td>99 Not coded: Census tract has zero population and no rural-urban identifier information</td>
<td></td>
</tr>
</tbody>
</table>
</dd>
</dl>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-CDCPLACES" class="csl-entry" role="listitem">
Brenden Smith. 2025. <span>“CDCPLACES: Access the ’CDC PLACES’ API.”</span> <a href="https://CRAN.R-project.org/package=CDCPLACES">https://CRAN.R-project.org/package=CDCPLACES</a>.
</div>
<div id="ref-Greenlund2022" class="csl-entry" role="listitem">
Greenlund, Kurt J., Hua Lu, Yan Wang, Kevin A. Matthews, Jennifer M. LeClercq, Benjamin Lee, and Susan A. Carlson. 2022. <span>“PLACES: Local Data for Better Health.”</span> <em>Preventing Chronic Disease</em> 19 (June). <a href="https://doi.org/10.5888/pcd19.210459">https://doi.org/10.5888/pcd19.210459</a>.
</div>
<div id="ref-pan2023" class="csl-entry" role="listitem">
Pan, Longrong, Robert Melendez, Philippa Clarke, Grace Noppert, Iris Gomez-Lopez, Megan Chenoweth, Anam Khan, Mao Li, and Lindsay Gypin. 2023. <span>“National Neighborhood Data Archive (NaNDA): Public Transit Stops by Census Tract and ZIP Code Tabulation Area, United States, 2016-2018 and 2024.”</span> ICPSR - Interuniversity Consortium for Political; Social Research. <a href="https://doi.org/10.3886/ICPSR38605.V2">https://doi.org/10.3886/ICPSR38605.V2</a>.
</div>
<div id="ref-paykin2022" class="csl-entry" role="listitem">
Paykin, Susan, Moksha Menghaney, Qinyun Lin, and Marynia Kolak. 2022. <em>Spaykin/Rural-Urban-Classification: Rural, Suburban, Urban Classification for Small Area Analysis</em>. Zenodo. <a href="https://doi.org/10.5281/ZENODO.6359701">https://doi.org/10.5281/ZENODO.6359701</a>.
</div>
<div id="ref-census2023" class="csl-entry" role="listitem">
U.S. Census Bureau. 2023. <span>“2020 Census Demographic and Housing Characteristics File (DHC).”</span> Washington, DC: U.S. Census Bureau.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>